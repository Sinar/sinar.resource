<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    i18n:domain="popolo.contenttypes"
    metal:use-macro="context/main_template/macros/master">

<body>

<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main"
        tal:define="toLocalizedTime nocall:context/@@plone/toLocalizedTime">

         <div tal:replace="structure provider:plone.abovecontenttitle" />
            <h1 class="documentFirstHeading" tal:content="context/title" />

         <div tal:replace="structure provider:plone.belowcontenttitle" />
             <p class="lead" tal:content="context/description" />

         <div tal:replace="structure provider:plone.abovecontentbody" />

             <dl>
                 <dt>Resource Type:</dt>
                 <dd tal:content="view/resource_type_title | nothing"></dd>
             </dl>

             <div tal:content="structure context/text/output | nothing"></div>

             <div class="container">
                 <div class="row">
                     <div class="col-md-6">
                         <div class="row" tal:condition="python: checkPermission('Modify portal content', context)">
                             <div class="d-inline-flex gap-1">
                                <a class="btn btn-primary" data-bs-toggle="collapse"
                                   href="#collapseAttachments" role="button"
                                   aria-expanded="false"
                                   aria-controls="collapseAttachments"
                                   tal:condition="python:len(context.getFolderContents())>0">
                                   Click for list of items attached to
                                   this Resource
                                </a>
                             </div>

                             <div class="collapse" id="collapseAttachments"
                                   tal:condition="python:len(context.getFolderContents())>0">
                                   <table class="table table-sm table-bordered table-striped">
                                    <thead>
                                      <tr>
                                        <th scope="col">Attachment Name</th>
                                        <th scope="col">Type</th>
                                      </tr>
                                    </thead>
                                  <tbody>
                                      <tr tal:repeat="item context/listFolderContents">
                                        <td><a href="" tal:attributes="href item/getURL|item/absolute_url">
                                                <span tal:replace="item/title" /></a> 
                                        </td>
                                        <td>
                                            <span tal:replace="item/portal_type" />
                                        </td>
                                      </tr>
                                  </tbody>
                                  </table>
                                  </div>
                                </div>
                     </div>
                 </div>
             </div>

         <div tal:replace="structure provider:plone.belowcontentbody" />

    </tal:main-macro>
</metal:main>
    

</body>


</html>
